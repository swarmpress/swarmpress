---
type LocalizedText = string | { en?: string; de?: string; fr?: string; it?: string };

interface Props {
  title: LocalizedText;
  subtitle?: LocalizedText;
  badge?: LocalizedText;
  image: string;
  height?: string;
  locale?: string;
}

const { title: titleProp, subtitle: subtitleProp, badge: badgeProp, image, height = "80vh", locale = 'en' } = Astro.props;

// Helper to get localized text - handles both string and object formats
function getText(value: LocalizedText | undefined, lang: string): string | undefined {
  if (!value) return undefined;
  if (typeof value === 'string') return value;
  return value[lang as keyof typeof value] || value.en || Object.values(value)[0];
}

const title = getText(titleProp, locale) || '';
const subtitle = getText(subtitleProp, locale);
const badge = getText(badgeProp, locale);
---

<section class={`relative overflow-hidden bg-black`} style={`height: ${height}; min-height: 600px;`}>
    <div class="absolute inset-0">
        <img
            src={image}
            alt={title.replace(/<br\s*\/?>/gi, ' ')}
            class="w-full h-full object-cover opacity-60 transition-transform duration-[10s] hover:scale-110"
        />
        <div class="absolute inset-0 bg-gradient-to-t from-black via-black/20 to-transparent"></div>
    </div>

    <div class="relative h-full container mx-auto px-4 flex flex-col justify-center">
        <div class="max-w-4xl">
            {badge && (
                <div class="inline-flex items-center gap-3 px-3 py-1 rounded-full bg-primary/20 backdrop-blur-md border border-primary/30 text-white text-[10px] font-bold uppercase tracking-[0.3em] mb-8">
                    <span class="w-2 h-2 rounded-full bg-primary animate-pulse"></span>
                    {badge}
                </div>
            )}
            <h1 class="font-serif text-5xl md:text-8xl font-bold text-white mb-8 leading-[0.9] tracking-tighter" set:html={title}>
            </h1>
            {subtitle && (
                <p class="text-white/80 text-xl md:text-2xl font-light leading-relaxed max-w-2xl font-serif italic">
                    {subtitle}
                </p>
            )}
        </div>
    </div>
</section>

<style>
    .font-serif {
        letter-spacing: -0.02em;
    }
</style>
